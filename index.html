<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IslamicDigitalApp - Premium Emerald Gold</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #46A29F; 
            --primary-dark: #1B4D3E; 
            --secondary: #D4AF37;     
            --accent-light: #F9E076; 
            --bg: #F4F7F6; 
            --card: #FFFFFF;          
            --text: #1B4D3E; 
            --latin: #bc9512; 
            --radius: 24px;
            --gradient-emerald: linear-gradient(135deg, #46A29F, #1B4D3E);
            --gradient-gold: linear-gradient(135deg, #D4AF37, #F9E076);
            --shadow: 0 8px 20px rgba(0,0,0,0.05);
        }

        .dark-theme { 
            --bg: #0A1613; --card: #152A25; --primary: #58C4C0; 
            --primary-dark: #81E6A4; --secondary: #F9E076; 
            --text: #E0F2EF; --latin: #F9E076; 
        }

        body { 
            margin: 0; font-family: 'Inter', sans-serif; 
            background-color: var(--bg); color: var(--text); 
            transition: 0.3s; padding-bottom: 100px; 
            overflow-x: hidden;
        }

        /* --- SPLASH SCREEN --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0A1613; 
            display: flex; justify-content: center; align-items: center;
            z-index: 9999; transition: opacity 0.5s ease, visibility 0.5s;
        }
        .splash-content { text-align: center; color: var(--secondary); }
        .quran-logo-svg { 
            width: 130px; height: 130px; fill: var(--secondary); 
            filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.4));
            margin-bottom: 20px; animation: pulse 2s infinite ease-in-out;
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .loader-bar {
            width: 140px; height: 3px; background: rgba(255,255,255,0.1);
            margin: 15px auto; border-radius: 10px; overflow: hidden;
        }
        .loader-progress {
            width: 0%; height: 100%; background: var(--secondary);
            animation: loadProgress 1.5s forwards ease-in-out;
        }
        @keyframes loadProgress { to { width: 100%; } }
        .splash-hidden { opacity: 0; visibility: hidden; pointer-events: none; }

        /* --- UI COMPONENTS --- */
        header { 
            background: var(--gradient-emerald); color: white; padding: 25px 15px; 
            display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; 
            border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); border-bottom: 3px solid var(--secondary); 
        }
        .header-title { flex-grow: 1; text-align: center; }
        .theme-btn { 
            background: rgba(255,255,255,0.2); border: none; color: white; 
            width: 40px; height: 40px; border-radius: 50%; cursor: pointer; 
            flex-shrink: 0;
        }

        /* --- HAMBURGER MENU (pojok kanan atas, fixed) --- */
        #hamburger-btn {
            position: fixed;
            top: 18px;
            right: 15px;
            z-index: 2000;
            background: rgba(255,255,255,0.25);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            backdrop-filter: blur(4px);
        }

        #top-info-section { background: var(--card); margin: 15px; padding: 20px; border-radius: var(--radius); text-align: center; box-shadow: var(--shadow); }
        .calendar-box { font-size: 14px; font-weight: bold; color: var(--primary); }
        
        .container { padding: 0 15px; }

        /* --- TERAKHIR DIBACA: scroll horizontal, item lebih kecil --- */
        .recent-scroll-wrapper {
            overflow-x: auto;
            padding: 0 15px 8px 15px;
            margin-bottom: 20px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        .recent-scroll-wrapper::-webkit-scrollbar { display: none; }
        .recent-grid {
            display: flex;
            gap: 10px;
            width: max-content;
        }
        .recent-item { 
            background: var(--gradient-emerald); color: white; padding: 8px 6px; 
            border-radius: 16px; width: 75px; height: 75px;
            display: flex; flex-direction: column; 
            align-items: center; justify-content: center;
            box-shadow: 0 5px 12px rgba(27,77,62,0.2); 
            cursor: pointer; border: 1px solid var(--secondary);
            flex-shrink: 0;
        }
        .recent-item span { font-size: 18px; }
        .recent-item b { font-size: 8px; text-align: center; margin-top: 4px; width: 90%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .card { background: var(--card); border-radius: var(--radius); padding: 20px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; border-left: 6px solid var(--secondary); box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; }
        .ayat-box { background: var(--card); padding: 20px; margin-bottom: 15px; border-radius: var(--radius); border-bottom: 4px solid var(--secondary); }
        .teks-arab { font-family: 'Amiri', serif; font-size: 32px; direction: rtl; line-height: 2.3; text-align: right; color: var(--primary-dark); }
        .teks-latin { color: var(--latin); font-style: italic; font-size: 14px; margin: 15px 0 10px 0; }
        .teks-indo { font-size: 13px; opacity: 0.8; line-height: 1.6; border-top: 1px dashed #eee; padding-top: 10px; }

        /* --- MODERN PAGES STYLES --- */
        .page-header { background: var(--gradient-emerald); padding: 40px 20px; border-radius: var(--radius); color: white; text-align: center; margin-bottom: 25px; border: 2px solid var(--secondary); position: relative; overflow: hidden; }
        .page-header::after { content: '€û'; position: absolute; bottom: -10px; right: 20px; font-size: 80px; opacity: 0.1; }
        .quote-box { font-family: 'Amiri', serif; font-size: 20px; color: var(--secondary); margin-bottom: 10px; }
        .modern-list { background: var(--card); border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.05); }
        .modern-list-item { padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        
        /* --- NAV (5 items) --- */
        .bottom-nav { 
            position: fixed; bottom: 0; width: 100%; height: 85px; 
            background: var(--card); display: flex; justify-content: space-around; 
            align-items: center; border-top-left-radius: var(--radius); 
            border-top-right-radius: var(--radius); border-top: 2px solid var(--secondary); 
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 1000; 
        }
        .nav-item { text-align: center; color: #888; flex: 1; cursor: pointer; padding: 5px 0; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-item span { font-size: 20px; display: block; }
        .nav-item small { font-size: 9px; display: block; margin-top: 2px; }

        /* --- MISC --- */
        .play-btn { background: var(--gradient-gold); color: #1B4D3E; border: none; padding: 8px 16px; border-radius: 20px; font-weight: bold; cursor: pointer; }
        .playing { border: 2px solid var(--secondary); background: rgba(212,175,55,0.05); }
        .qris-img { width: 220px; height: 220px; border: 5px solid white; border-radius: 15px; box-shadow: var(--shadow); margin-top: 15px; }
        .contact-btn { display: flex; align-items: center; justify-content: center; gap: 10px; background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 10px; text-decoration: none; color: var(--text); border: 1px solid #eee; font-weight: bold; transition: 0.3s; }
        .contact-btn:active { transform: scale(0.98); background: #f9f9f9; }

        /* --- JUZ STYLES --- */
        .juz-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 10px;
        }
        .juz-card {
            background: var(--card);
            border-radius: 18px;
            padding: 15px;
            border: 1px solid rgba(212,175,55,0.3);
            border-bottom: 4px solid var(--secondary);
            cursor: pointer;
            box-shadow: var(--shadow);
            transition: 0.2s;
            text-align: center;
        }
        .juz-card:active { transform: scale(0.97); }
        .juz-number {
            width: 42px; height: 42px;
            background: var(--gradient-emerald);
            color: white;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 16px;
            margin: 0 auto 8px;
            border: 2px solid var(--secondary);
        }
        .juz-info { font-size: 11px; opacity: 0.7; margin-top: 4px; line-height: 1.5; }
        .juz-arabic { font-family: 'Amiri', serif; font-size: 15px; color: var(--primary); margin-top: 4px; }

        @media screen and (max-width: 600px) {
            .container { padding: 0 12px; }
        }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="splash-content">
        <svg class="quran-logo-svg" viewBox="0 0 24 24">
            <path d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.57,5 2.89,5.83 1.74,7.14C1.27,7.67 1,8.34 1,9.05V20.5C1,21.42 1.9,22.08 2.77,21.82C4.04,21.44 5.31,21.25 6.5,21.25C8.31,21.25 10.38,21.75 12,22.5C13.62,21.75 15.69,21.25 17.5,21.25C18.69,21.25 19.96,21.44 21.23,21.82C22.1,22.08 23,21.42 23,20.5V9.05C23,8.34 22.73,7.67 22.26,7.14C21.11,5.83 19.43,5 17.5,5C15.63,5 13.88,5.75 12.5,7V7C11.12,5.75 9.37,5 7.5,5H6.5M7.5,7C8.94,7 10.27,7.66 11.21,8.7L12.5,10.11L13.79,8.7C14.73,7.66 16.06,7 17.5,7C18.91,7 20.15,7.59 21,8.5V19C19.91,18.66 18.77,18.5 17.5,18.5C15.5,18.5 13.5,19 12,20V11C12,9.34 10.66,8 9,8H7.5C6.23,8 5.09,8.16 4,8.5V19C5.23,18.66 6.37,18.5 7.5,18.5C9.5,18.5 11.5,19 13,20V20" />
        </svg>
        <h2 style="letter-spacing: 4px; margin: 0; font-family: 'Amiri', serif;">AL-QUR'AN</h2>
        <p style="font-size: 10px; color: white; opacity: 0.6; margin-top: 5px;">Islamic Digital Application</p>
        <div class="loader-bar"><div class="loader-progress"></div></div>
    </div>
</div>

<!-- Hamburger Menu fixed di pojok kanan atas -->
<button id="hamburger-btn" onclick="showMenuLainnya()">‚ò∞</button>

<header>
    <button class="theme-btn" onclick="toggleTheme()">üåì</button>
    <div class="header-title"><h3 style="margin:0;">ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸëŸ∞ŸáŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸ∞ŸÜŸê ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸíŸÖŸê</h3></div>
    <!-- Spacer agar judul tetap center -->
    <div style="width:40px; flex-shrink:0;"></div>
</header>

<div id="top-info-section">
    <div class="calendar-box" id="calendar-display">Memuat Kalender...</div>
    <div id="adz" style="font-size:11px; opacity:0.55; margin: 6px 0 4px;">‚ú® Quotes Jam Ini</div>
    <div id="renungan-box" style="transition: opacity 0.6s ease; min-height: 40px; font-style:italic; font-size:13px; line-height:1.6;"></div>
    <div id="jam-ganti" style="font-size:10px; opacity:0.4; margin-top:6px;"></div>
</div>

<div id="app-content"></div>

<nav class="bottom-nav">
    <div class="nav-item active" id="nav-0" onclick="showHome()">
        <span>üè†</span><small>Beranda</small>
    </div>
    <div class="nav-item" id="nav-1" onclick="showCariAyat()">
        <span>üîç</span><small>Cari</small>
    </div>
    <div class="nav-item" id="nav-2" onclick="loadJadwalPuasa()">
        <span>üïå</span><small>Jadwal</small>
    </div>
    <div class="nav-item" id="nav-3" onclick="showJuz()">
        <span>üìö</span><small>Per Juz</small>
    </div>
    <div class="nav-item" id="nav-4" onclick="showMurottal()">
        <span>üéß</span><small>Murottal</small>
    </div>
</nav>

<script>
    let currentAudio = new Audio();
    let selectedQori = '01';

    // Data Juz: mulai dari surah & ayat berapa
    const juzData = [
        { juz: 1,  start: {surah: 1,  ayat: 1},  end: {surah: 2,  ayat: 141}, firstWord: "ÿßŸÑŸÖ" },
        { juz: 2,  start: {surah: 2,  ayat: 142}, end: {surah: 2,  ayat: 252}, firstWord: "ÿ≥ŸéŸäŸéŸÇŸèŸàŸÑŸè" },
        { juz: 3,  start: {surah: 2,  ayat: 253}, end: {surah: 3,  ayat: 92},  firstWord: "ÿ™ŸêŸÑŸíŸÉŸé" },
        { juz: 4,  start: {surah: 3,  ayat: 93},  end: {surah: 4,  ayat: 23},  firstWord: "ŸÑŸéŸÜ" },
        { juz: 5,  start: {surah: 4,  ayat: 24},  end: {surah: 4,  ayat: 147}, firstWord: "ŸàŸéÿßŸÑŸíŸÖŸèÿ≠ŸíÿµŸéŸÜŸéÿßÿ™Ÿè" },
        { juz: 6,  start: {surah: 4,  ayat: 148}, end: {surah: 5,  ayat: 81},  firstWord: "ŸÑŸéÿß ŸäŸèÿ≠Ÿêÿ®ŸèŸë" },
        { juz: 7,  start: {surah: 5,  ayat: 82},  end: {surah: 6,  ayat: 110}, firstWord: "ŸàŸéŸÑŸéÿ™Ÿéÿ¨ŸêÿØŸéŸÜŸéŸë" },
        { juz: 8,  start: {surah: 6,  ayat: 111}, end: {surah: 7,  ayat: 87},  firstWord: "ŸàŸéŸÑŸéŸàŸí" },
        { juz: 9,  start: {surah: 7,  ayat: 88},  end: {surah: 8,  ayat: 40},  firstWord: "ŸÇŸéÿßŸÑŸé" },
        { juz: 10, start: {surah: 8,  ayat: 41},  end: {surah: 9,  ayat: 92},  firstWord: "ŸàŸéÿßÿπŸíŸÑŸéŸÖŸèŸàÿß" },
        { juz: 11, start: {surah: 9,  ayat: 93},  end: {surah: 11, ayat: 5},   firstWord: "ÿ•ŸêŸÜŸéŸëŸÖŸéÿß" },
        { juz: 12, start: {surah: 11, ayat: 6},   end: {surah: 12, ayat: 52},  firstWord: "ŸàŸéŸÖŸéÿß" },
        { juz: 13, start: {surah: 12, ayat: 53},  end: {surah: 14, ayat: 52},  firstWord: "ŸàŸéŸÖŸéÿß ÿ£Ÿèÿ®Ÿéÿ±ŸêŸëÿ¶Ÿè" },
        { juz: 14, start: {surah: 15, ayat: 1},   end: {surah: 16, ayat: 128}, firstWord: "ÿßŸÑÿ±" },
        { juz: 15, start: {surah: 17, ayat: 1},   end: {surah: 18, ayat: 74},  firstWord: "ÿ≥Ÿèÿ®Ÿíÿ≠ŸéÿßŸÜŸé" },
        { juz: 16, start: {surah: 18, ayat: 75},  end: {surah: 20, ayat: 135}, firstWord: "ŸÇŸéÿßŸÑŸé" },
        { juz: 17, start: {surah: 21, ayat: 1},   end: {surah: 22, ayat: 78},  firstWord: "ÿßŸÇŸíÿ™Ÿéÿ±Ÿéÿ®Ÿé" },
        { juz: 18, start: {surah: 23, ayat: 1},   end: {surah: 25, ayat: 20},  firstWord: "ŸÇŸéÿØŸí ÿ£ŸéŸÅŸíŸÑŸéÿ≠Ÿé" },
        { juz: 19, start: {surah: 25, ayat: 21},  end: {surah: 27, ayat: 55},  firstWord: "ŸàŸéŸÇŸéÿßŸÑŸé" },
        { juz: 20, start: {surah: 27, ayat: 56},  end: {surah: 29, ayat: 45},  firstWord: "ÿ£ŸéŸÖŸéŸëŸÜ" },
        { juz: 21, start: {surah: 29, ayat: 46},  end: {surah: 33, ayat: 30},  firstWord: "ŸàŸéŸÑŸéÿß ÿ™Ÿèÿ¨ŸéÿßÿØŸêŸÑŸèŸàÿß" },
        { juz: 22, start: {surah: 33, ayat: 31},  end: {surah: 36, ayat: 27},  firstWord: "ŸàŸéŸÖŸéŸÜ ŸäŸéŸÇŸíŸÜŸèÿ™Ÿí" },
        { juz: 23, start: {surah: 36, ayat: 28},  end: {surah: 39, ayat: 31},  firstWord: "ŸàŸéŸÖŸéÿß ÿ£ŸéŸÜÿ≤ŸéŸÑŸíŸÜŸéÿß" },
        { juz: 24, start: {surah: 39, ayat: 32},  end: {surah: 41, ayat: 46},  firstWord: "ŸÅŸéŸÖŸéŸÜŸí ÿ£Ÿéÿ∏ŸíŸÑŸéŸÖŸè" },
        { juz: 25, start: {surah: 41, ayat: 47},  end: {surah: 45, ayat: 37},  firstWord: "ÿ•ŸêŸÑŸéŸäŸíŸáŸê" },
        { juz: 26, start: {surah: 46, ayat: 1},   end: {surah: 51, ayat: 30},  firstWord: "ÿ≠ŸÖ" },
        { juz: 27, start: {surah: 51, ayat: 31},  end: {surah: 57, ayat: 29},  firstWord: "ŸÇŸéÿßŸÑŸé" },
        { juz: 28, start: {surah: 58, ayat: 1},   end: {surah: 66, ayat: 12},  firstWord: "ŸÇŸéÿØŸí ÿ≥ŸéŸÖŸêÿπŸé" },
        { juz: 29, start: {surah: 67, ayat: 1},   end: {surah: 77, ayat: 50},  firstWord: "ÿ™Ÿéÿ®Ÿéÿßÿ±ŸéŸÉŸé" },
        { juz: 30, start: {surah: 78, ayat: 1},   end: {surah: 114, ayat: 6},  firstWord: "ÿπŸéŸÖŸéŸë" },
    ];

    // --- 24 QUOTES ISLAMI (berganti tiap jam) ---
    const quotesPerJam = [
        { teks: '"Sesungguhnya setelah kesulitan ada kemudahan." (QS. Al-Insyirah: 6)', jam: '00.00' },
        { teks: '"Barangsiapa bertakwa kepada Allah, niscaya Dia akan membukakan jalan keluar baginya." (QS. Ath-Thalaq: 2)', jam: '01.00' },
        { teks: '"Cukuplah Allah sebagai pelindung kami, dan Dialah sebaik-baik pelindung." (QS. Ali Imran: 173)', jam: '02.00' },
        { teks: '"Dan hanya kepada Tuhanmu hendaklah engkau berharap." (QS. Al-Insyirah: 8)', jam: '03.00' },
        { teks: '"Bangunlah di malam hari sebagai ibadah tambahan bagimu; mudah-mudahan Tuhanmu mengangkatmu ke tempat yang terpuji." (QS. Al-Isra: 79)', jam: '04.00' },
        { teks: '"Dirikanlah shalat karena shalat itu mencegah perbuatan keji dan mungkar." (QS. Al-Ankabut: 45)', jam: '05.00' },
        { teks: '"Dan apabila hamba-hamba-Ku bertanya kepadamu tentang Aku, maka sesungguhnya Aku dekat." (QS. Al-Baqarah: 186)', jam: '06.00' },
        { teks: '"Allah tidak membebani seseorang melainkan sesuai dengan kesanggupannya." (QS. Al-Baqarah: 286)', jam: '07.00' },
        { teks: '"Sesungguhnya Allah bersama orang-orang yang sabar." (QS. Al-Baqarah: 153)', jam: '08.00' },
        { teks: '"Boleh jadi kamu tidak menyenangi sesuatu, padahal itu baik bagimu." (QS. Al-Baqarah: 216)', jam: '09.00' },
        { teks: '"Sesungguhnya Allah tidak akan mengubah keadaan suatu kaum sebelum mereka mengubah keadaan diri mereka sendiri." (QS. Ar-Ra\'d: 11)', jam: '10.00' },
        { teks: '"Dan bersabarlah, karena sesungguhnya Allah tidak menyia-nyiakan pahala orang yang berbuat kebaikan." (QS. Hud: 115)', jam: '11.00' },
        { teks: '"Janganlah kamu berduka cita, sesungguhnya Allah bersama kita." (QS. At-Taubah: 40)', jam: '12.00' },
        { teks: '"Sebaik-baik manusia adalah yang paling bermanfaat bagi orang lain." (HR. Ahmad & Ath-Thabrani)', jam: '13.00' },
        { teks: '"Katakanlah: Wahai hamba-hamba-Ku yang melampaui batas, janganlah kamu berputus asa dari rahmat Allah." (QS. Az-Zumar: 53)', jam: '14.00' },
        { teks: '"Dan bersyukurlah atas nikmat Allah, jika kamu hanya menyembah kepada-Nya." (QS. An-Nahl: 114)', jam: '15.00' },
        { teks: '"Ingatlah, hanya dengan mengingat Allah hati menjadi tentram." (QS. Ar-Ra\'d: 28)', jam: '16.00' },
        { teks: '"Barang siapa yang bertawakal kepada Allah, maka Allah akan mencukupkan keperluannya." (QS. Ath-Thalaq: 3)', jam: '17.00' },
        { teks: '"Sesungguhnya shalat itu adalah kewajiban yang ditentukan waktunya bagi orang-orang yang beriman." (QS. An-Nisa: 103)', jam: '18.00' },
        { teks: '"Dan di antara tanda-tanda kekuasaan-Nya adalah Dia menciptakan untuk kamu malam supaya kamu beristirahat." (QS. Ar-Rum: 23)', jam: '19.00' },
        { teks: '"Bacalah dengan menyebut nama Tuhanmu yang menciptakan." (QS. Al-\'Alaq: 1)', jam: '20.00' },
        { teks: '"Sesungguhnya orang-orang mukmin adalah bersaudara, maka damaikanlah antara kedua saudaramu." (QS. Al-Hujurat: 10)', jam: '21.00' },
        { teks: '"Dan bertasbihlah dengan memuji Tuhanmu sebelum terbit matahari dan sebelum terbenam." (QS. Qaf: 39)', jam: '22.00' },
        { teks: '"Maka nikmat Tuhanmu yang manakah yang kamu dustakan?" (QS. Ar-Rahman: 13)', jam: '23.00' },
    ];

    function updateQuotes() {
        const jam = new Date().getHours(); // 0‚Äì23
        const q = quotesPerJam[jam];
        const box = document.getElementById('renungan-box');
        const jamEl = document.getElementById('jam-ganti');

        // Fade out ‚Üí ganti ‚Üí fade in
        box.style.opacity = '0';
        setTimeout(() => {
            box.innerText = q.teks;
            box.style.opacity = '1';
        }, 400);

        // Hitung menit tersisa sampai jam berikutnya
        const mnt = new Date().getMinutes();
        const sisaMenit = 60 - mnt;
        jamEl.innerText = `üïê Berganti dalam ${sisaMenit} menit`;
    }

    window.addEventListener('load', () => {
        updateMasehi();
        updateQuotes();
        showHome();
        setTimeout(() => {
            document.getElementById('splash-screen').classList.add('splash-hidden');
        }, 1500);

        // Cek setiap menit, ganti quotes kalau jam berubah
        let jamTerakhir = new Date().getHours();
        setInterval(() => {
            const jamSekarang = new Date().getHours();
            if (jamSekarang !== jamTerakhir) {
                jamTerakhir = jamSekarang;
                updateQuotes();
            }
            // Update sisa menit setiap menit
            const mnt = new Date().getMinutes();
            const el = document.getElementById('jam-ganti');
            if (el) el.innerText = `üïê Berganti dalam ${60 - mnt} menit`;
        }, 60000);
    });

    function updateMasehi() {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('calendar-display').innerText = new Date().toLocaleDateString('id-ID', options);
    }

    // --- HOME & SURAH LOGIC ---
    function saveHistory(num, name) {
        let history = JSON.parse(localStorage.getItem('readingHistory') || "[]");
        history = history.filter(item => item.num !== num);
        history.unshift({ num, name });
        if (history.length > 6) history.pop();
        localStorage.setItem('readingHistory', JSON.stringify(history));
    }

    function getHistoryHTML() {
        let history = JSON.parse(localStorage.getItem('readingHistory') || "[]");
        let html = '';
        for (let i = 0; i < 6; i++) {
            if (history[i]) {
                html += `<div class="recent-item" onclick="showDetail(${history[i].num}, '${history[i].name}')"><span>üìñ</span><b>${history[i].name}</b></div>`;
            } else {
                html += `<div class="recent-item" style="background:transparent; border:1px dashed var(--primary); color:#999;"><span>‚ûñ</span><b>Kosong</b></div>`;
            }
        }
        return html;
    }

    async function showHome() {
        updateActiveNav(0);
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <p style="font-size:10px; font-weight:bold; opacity:0.6; margin:15px 0 8px;">TERAKHIR DIBACA</p>
            </div>
            <div class="recent-scroll-wrapper">
                <div class="recent-grid">${getHistoryHTML()}</div>
            </div>
            <div class="container">
                <p style="font-size:10px; font-weight:bold; opacity:0.6; margin-bottom:10px;">DAFTAR SURAH</p>
                <div id="list-container">Memuat...</div>
            </div>`;
        try {
            const res = await fetch('https://equran.id/api/v2/surat');
            const data = await res.json();
            document.getElementById('list-container').innerHTML = data.data.map(s => `
                <div class="card" onclick="showDetail(${s.nomor}, '${s.namaLatin}')">
                    <div><b>${s.nomor}. ${s.namaLatin}</b><br><small>${s.arti}</small></div>
                    <div style="font-family:'Amiri'; color:var(--primary); font-size:22px;">${s.nama}</div>
                </div>`).join('');
        } catch(e) { document.getElementById('list-container').innerHTML = "Gagal memuat."; }
    }

    async function showDetail(id, name) {
        saveHistory(id, name);
        const content = document.getElementById('app-content');
        content.innerHTML = '<p style="text-align:center; padding:50px;">Bismillah...</p>';
        const res = await fetch(`https://equran.id/api/v2/surat/${id}`);
        const json = await res.json();
        const s = json.data;

        let html = `<div class="container">
            <button onclick="showHome()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
            <div style="background:var(--card); padding:15px; border-radius:15px; margin-bottom:15px; border:1px solid var(--secondary);">
                <label style="font-size:11px; font-weight:bold;">Pilih Qori:</label>
                <select style="width:100%; padding:10px; border-radius:10px; margin-top:5px; border:1px solid #ddd;" onchange="selectedQori = this.value">
                    <option value="01" ${selectedQori=='01'?'selected':''}>Misyari Rasyid Al-Afasy</option>
                    <option value="02" ${selectedQori=='02'?'selected':''}>Abdullah Al-Juhany</option>
                    <option value="03" ${selectedQori=='03'?'selected':''}>Abdurrahman As-Sudais</option>
                    <option value="04" ${selectedQori=='04'?'selected':''}>Muammar ZA</option>
                </select>
            </div>
            <h2 style="text-align:center; color:var(--primary-dark); font-family:'Amiri';">${s.namaLatin}</h2>`;

        s.ayat.forEach(a => {
            html += `
                <div class="ayat-box" id="ayat-${a.nomorAyat}">
                    <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                        <span style="background:var(--secondary); color:#1B4D3E; padding:3px 12px; border-radius:15px; font-size:11px; font-weight:bold;">Ayat ${a.nomorAyat}</span>
                        <button class="play-btn" data-audio='${JSON.stringify(a.audio)}' data-id="${a.nomorAyat}" data-total="${s.jumlahAyat}">‚ñ∂ Putar</button>
                    </div>
                    <div class="teks-arab">${a.teksArab}</div>
                    <div class="teks-latin">${a.teksLatin}</div>
                    <div class="teks-indo">${a.teksIndonesia}</div>
                </div>`;
        });
        content.innerHTML = html + "</div>";
        window.scrollTo(0,0);
        document.querySelectorAll('.play-btn').forEach(btn => {
            btn.onclick = () => {
                const audios = JSON.parse(btn.getAttribute('data-audio'));
                playMurottal(audios[selectedQori], parseInt(btn.getAttribute('data-id')), parseInt(btn.getAttribute('data-total')));
            };
        });
    }

    // Detail surah dari tampilan Juz (tombol kembali ke Juz)
    async function showDetailFromJuz(id, name, juzNum) {
        saveHistory(id, name);
        const content = document.getElementById('app-content');
        content.innerHTML = '<p style="text-align:center; padding:50px;">Bismillah...</p>';
        const res = await fetch(`https://equran.id/api/v2/surat/${id}`);
        const json = await res.json();
        const s = json.data;

        let html = `<div class="container">
            <button onclick="showJuzDetail(${juzNum})" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali ke Juz ${juzNum}</button>
            <div style="background:var(--card); padding:15px; border-radius:15px; margin-bottom:15px; border:1px solid var(--secondary);">
                <label style="font-size:11px; font-weight:bold;">Pilih Qori:</label>
                <select style="width:100%; padding:10px; border-radius:10px; margin-top:5px; border:1px solid #ddd;" onchange="selectedQori = this.value">
                    <option value="01" ${selectedQori=='01'?'selected':''}>Misyari Rasyid Al-Afasy</option>
                    <option value="02" ${selectedQori=='02'?'selected':''}>Abdullah Al-Juhany</option>
                    <option value="03" ${selectedQori=='03'?'selected':''}>Abdurrahman As-Sudais</option>
                    <option value="04" ${selectedQori=='04'?'selected':''}>Muammar ZA</option>
                </select>
            </div>
            <h2 style="text-align:center; color:var(--primary-dark); font-family:'Amiri';">${s.namaLatin}</h2>`;

        s.ayat.forEach(a => {
            html += `
                <div class="ayat-box" id="ayat-${a.nomorAyat}">
                    <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                        <span style="background:var(--secondary); color:#1B4D3E; padding:3px 12px; border-radius:15px; font-size:11px; font-weight:bold;">Ayat ${a.nomorAyat}</span>
                        <button class="play-btn" data-audio='${JSON.stringify(a.audio)}' data-id="${a.nomorAyat}" data-total="${s.jumlahAyat}">‚ñ∂ Putar</button>
                    </div>
                    <div class="teks-arab">${a.teksArab}</div>
                    <div class="teks-latin">${a.teksLatin}</div>
                    <div class="teks-indo">${a.teksIndonesia}</div>
                </div>`;
        });
        content.innerHTML = html + "</div>";
        window.scrollTo(0,0);
        document.querySelectorAll('.play-btn').forEach(btn => {
            btn.onclick = () => {
                const audios = JSON.parse(btn.getAttribute('data-audio'));
                playMurottal(audios[selectedQori], parseInt(btn.getAttribute('data-id')), parseInt(btn.getAttribute('data-total')));
            };
        });
    }

    function playMurottal(url, id, total) {
        currentAudio.pause(); currentAudio = new Audio(url);
        document.querySelectorAll('.ayat-box').forEach(el => el.classList.remove('playing'));
        const target = document.getElementById(`ayat-${id}`);
        if(target) { target.classList.add('playing'); target.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
        currentAudio.play();
        currentAudio.onended = () => {
            if (id < total) {
                const next = document.querySelector(`.play-btn[data-id="${id + 1}"]`);
                if(next) next.click();
            }
        };
    }

    // --- BACAAN PER JUZ ---
    function showJuz() {
        updateActiveNav(3);
        const content = document.getElementById('app-content');
        
        let juzCardsHTML = juzData.map(j => `
            <div class="juz-card" onclick="showJuzDetail(${j.juz})">
                <div class="juz-number">${j.juz}</div>
                <div style="font-weight:bold; font-size:13px;">Juz ${j.juz}</div>
                <div class="juz-arabic">${j.firstWord}</div>
                <div class="juz-info">Q.S ${j.start.surah}:${j.start.ayat} ‚Äì ${j.end.surah}:${j.end.ayat}</div>
            </div>
        `).join('');

        content.innerHTML = `
            <div class="container">
                <div class="page-header" style="padding: 25px 20px; margin-bottom: 20px;">
                    <h2 style="margin:0; font-family:'Amiri'; font-size:24px;">Bacaan Per Juz</h2>
                    <p style="font-size:12px; opacity:0.9; margin:5px 0 0;">Al-Qur'an 30 Juz ¬∑ Pilih juz untuk membaca</p>
                </div>
                <div class="juz-grid">
                    ${juzCardsHTML}
                </div>
            </div>`;
    }

    async function showJuzDetail(juzNum) {
        const juz = juzData[juzNum - 1];
        const content = document.getElementById('app-content');
        content.innerHTML = `<p style="text-align:center; padding:40px;">Memuat Juz ${juzNum}...</p>`;

        try {
            // Kumpulkan semua surah yang ada di juz ini
            const surahDiJuz = [];
            for (let s = juz.start.surah; s <= juz.end.surah; s++) {
                surahDiJuz.push(s);
            }

            let html = `
                <div class="container">
                    <button onclick="showJuz()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali ke Daftar Juz</button>
                    <div style="background:var(--gradient-emerald); color:white; padding:20px; border-radius:var(--radius); text-align:center; margin-bottom:20px; border:2px solid var(--secondary);">
                        <h2 style="margin:0; font-family:'Amiri';">ÿ¨Ÿèÿ≤Ÿíÿ°Ÿå ${juzNum}</h2>
                        <p style="margin:5px 0 0; font-size:13px; opacity:0.9;">Juz ${juzNum} ¬∑ Surah ${juz.start.surah} ‚Äì ${juz.end.surah}</p>
                    </div>
                    <p style="font-size:11px; font-weight:bold; opacity:0.6; margin-bottom:10px;">SURAH DALAM JUZ INI</p>
                    <div class="modern-list" style="margin-bottom:20px;">
            `;

            // Tampilkan daftar surah dalam juz ini saja, bisa diklik untuk baca
            const res = await fetch('https://equran.id/api/v2/surat');
            const allSurah = await res.json();
            const surahList = allSurah.data.filter(s => s.nomor >= juz.start.surah && s.nomor <= juz.end.surah);

            surahList.forEach(s => {
                let keterangan = '';
                if (s.nomor === juz.start.surah && s.nomor === juz.end.surah) {
                    keterangan = `Ayat ${juz.start.ayat}‚Äì${juz.end.ayat}`;
                } else if (s.nomor === juz.start.surah) {
                    keterangan = `Mulai ayat ${juz.start.ayat}`;
                } else if (s.nomor === juz.end.surah) {
                    keterangan = `Sampai ayat ${juz.end.ayat}`;
                } else {
                    keterangan = `Lengkap (${s.jumlahAyat} ayat)`;
                }

                html += `
                    <div class="modern-list-item" onclick="showDetailFromJuz(${s.nomor}, '${s.namaLatin}', ${juzNum})">
                        <div>
                            <b>${s.nomor}. ${s.namaLatin}</b>
                            <br><small style="color:var(--primary);">${keterangan}</small>
                            <br><small style="opacity:0.5;">${s.arti}</small>
                        </div>
                        <div style="display:flex; flex-direction:column; align-items:flex-end; gap:4px;">
                            <span style="font-family:'Amiri'; color:var(--primary); font-size:20px;">${s.nama}</span>
                            <span style="font-size:10px; opacity:0.5;">‚Üí</span>
                        </div>
                    </div>`;
            });

            html += `</div></div>`;
            content.innerHTML = html;
            window.scrollTo(0, 0);

        } catch(e) {
            content.innerHTML = `<div class="container"><p>Gagal memuat Juz ${juzNum}. Periksa koneksi internet.</p></div>`;
        }
    }

    // --- CARI AYAT ---
    function showCariAyat() {
        updateActiveNav(1);
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <div class="page-header">
                    <h2 style="margin:0; font-family: 'Amiri', serif;">Pencarian Pintar</h2>
                    <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Cari surah berdasarkan nama atau arti</p>
                </div>
                <div style="position: relative; margin-bottom: 25px;">
                    <input type="text" id="input-cari" onkeyup="liveSearch(this.value)" placeholder="Ketik nama surah atau arti..." 
                           style="width: 100%; padding: 18px 20px; border-radius: 15px; border: 2px solid #eee; font-family: 'Inter'; outline: none; box-sizing: border-box; box-shadow: var(--shadow); font-size: 14px; background: var(--card); color: var(--text);">
                </div>
                <div id="hasil-cari-container">
                    <div style="text-align: center; padding: 40px 20px; opacity: 0.5;">
                        <span style="font-size: 50px;">üìñ</span>
                        <p>Masukkan kata kunci untuk mencari surah...</p>
                    </div>
                </div>
            </div>
        `;
    }

    async function liveSearch(query) {
        const container = document.getElementById('hasil-cari-container');
        if (query.length < 2) return;
        try {
            const res = await fetch('https://equran.id/api/v2/surat');
            const json = await res.json();
            const results = json.data.filter(s => 
                s.namaLatin.toLowerCase().includes(query.toLowerCase()) || 
                s.arti.toLowerCase().includes(query.toLowerCase())
            );
            if (results.length > 0) {
                container.innerHTML = results.map(s => `
                    <div class="card" onclick="showDetail(${s.nomor}, '${s.namaLatin}')">
                        <div><b>${s.nomor}. ${s.namaLatin}</b><br><small>${s.arti}</small></div>
                        <div style="font-family: 'Amiri'; color: var(--primary); font-size: 20px;">${s.nama}</div>
                    </div>
                `).join('');
            } else {
                container.innerHTML = `<p style="text-align:center; opacity:0.5;">Surah tidak ditemukan.</p>`;
            }
        } catch (e) { console.error("Gagal mencari"); }
    }

    // --- MENU LAINNYA ---
    function showMenuLainnya() {
        updateActiveNav(-1); // tidak ada nav aktif khusus
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <div class="modern-list">
                    <div class="modern-list-item" onclick="showTentangKami()">
                        <div><b>‚ÑπÔ∏è Tentang Kami</b><br><small style="opacity:0.6;">Misi & Visi Aplikasi</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="showKontakSaran()">
                        <div><b>üí¨ Kontak & Saran</b><br><small style="opacity:0.6;">Kirim kritik & saran Anda</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="showDonasi()">
                        <div><b>üéÅ Donasi Pengembangan</b><br><small style="opacity:0.6;">Dukung keberlanjutan aplikasi</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="window.open('https://design-indra.github.io/me/')">
                        <div><b>üåê Website & Blog</b><br><small style="opacity:0.6;">Informasi terbaru kami</small></div>
                        <span>‚Üí</span>
                    </div>
                </div>
                <p style="text-align:center; font-size:10px; margin-top:30px; opacity:0.5;">Version 2.0 Premium ¬© 2026 IslamicDigitalApp all right reserved</p>
            </div>`;
    }

    function showTentangKami() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="page-header">
                    <div class="quote-box">"Khairunnas Anfa'uhum Linnas"</div>
                    <p style="font-size:12px; font-style:italic; opacity:0.9;">Sebaik-baik manusia adalah yang paling bermanfaat bagi orang lain.</p>
                </div>
                <div class="card" style="display:block; border-left:none; border-bottom:5px solid var(--secondary);">
                    <h3 style="color:var(--primary-dark); margin-top:0;">Visi Kami</h3>
                    <p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;">
                        IslamicDigitalApp lahir dari niat tulus untuk mendekatkan Al-Qur'an ke genggaman setiap hamba Allah di era modern. Kami percaya bahwa teknologi adalah jembatan menuju keberkahan jika digunakan untuk menyebarkan kalam Ilahi.
                    </p>
                    <h3 style="color:var(--primary-dark);">Misi Premium</h3>
                    <p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;">
                        Menghadirkan pengalaman membaca Al-Qur'an yang tenang, tanpa gangguan iklan, dengan estetika Emerald & Gold yang memanjakan mata, serta kemudahan akses murottal dari Qori ternama dunia, data Sumber Al-Quran dari equran. id Dijamin ke aslian nya.
                    </p>
                    <h3 style="color:var(--primary-dark);">Disclaimer on</h3>
                    <p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;"> Semua data Al-Quran digital ini menggunakan data digital Al-Qur'an yang bersumberkan daripada API EQuran.id (oleh equran.id). Semua teks Arab, transliterasi (Latin), terjemahan Bahasa Indonesia, dan fail audio murottal adalah berdasarkan pangkalan data tersebut yang terus dikemas kini secara berkala.
                    </p>
                </div>
            </div>`;
    }

    function showKontakSaran() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="page-header">
                    <div class="quote-box">Kritik & Saran</div>
                    <p style="font-size:12px; opacity:0.9;">Suara Anda sangat berarti bagi kesempurnaan aplikasi ini.</p>
                </div>
                <div class="card" style="display:block; border-left:none; padding:25px; border-bottom:5px solid var(--primary);">
                    <p style="font-size:13px; margin-bottom:20px; text-align:center; opacity:0.8;">Silahkan hubungi kami melalui saluran berikut untuk memberikan kritik, saran, atau melaporkan kesalahan:</p>
                    <a href="https://wa.me/6283803888990?text=Assalamualaikum,%20saya%20ingin%20memberikan%20saran%20untuk%20IslamicDigitalApp" class="contact-btn">
                        <span style="font-size:20px;">üì±</span> WhatsApp: 083803888990
                    </a>
                    <a href="mailto:mholis1991@gmail.com?subject=Saran%20IslamicDigitalApp" class="contact-btn">
                        <span style="font-size:20px;">üìß</span> Email: mholis1991@gmail.com
                    </a>
                    <div style="margin-top:20px; text-align:center; border-top:1px solid #eee; padding-top:15px;">
                        <small style="font-style:italic; color:var(--primary);">Jazakumullah Khairan Katsiran</small>
                    </div>
                </div>
            </div>`;
    }

    function showDonasi() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="card" style="display:block; text-align:center; padding:30px; border-left:none; border-top:5px solid var(--secondary);">
                    <h3 style="color:var(--primary-dark); margin-top:0;">Infaq Jariyah</h3>
                    <p style="font-size:13px; opacity:0.7;">Sedekah Anda membantu kami menjaga aplikasi tetap bebas iklan selamanya.</p>
                    <div style="margin:20px 0; text-align: center;">
                        <p style="font-size:11px; font-weight:bold; color:var(--latin); margin-bottom: 10px;">SCAN QRIS DISINI</p>
                        <img src="https://lh3.googleusercontent.com/u/0/d/1oBVpUR4s_mOAp4EcUbi25hb49MIA3yRf=w1000-h1000" 
                             class="qris-img" 
                             alt="QRIS Donasi"
                             style="width: 250px; height: 250px; object-fit: contain; border: 5px solid white; border-radius: 15px;">
                    </div>
                    <div style="background:rgba(70,162,159,0.05); padding:15px; border-radius:15px; border:1px solid #eee; text-align:left;">
                        <small style="color:var(--primary); font-weight:bold;">BCA (Transfer Manual)</small>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <b style="font-size:18px;">6095055005</b>
                            <button onclick="navigator.clipboard.writeText('6095055005'); alert('Disalin!')" style="background:var(--primary); color:white; border:none; padding:5px 10px; border-radius:8px; font-size:11px;">SALIN</button>
                        </div>
                        <small>a.n Muhamad Holis</small>
                    </div>
                </div>
            </div>`;
    }

    async function loadJadwalPuasa() {
        updateActiveNav(2); 
        const area = document.getElementById('app-content');
        area.innerHTML = `<div style="text-align:center; padding:50px;">Mendeteksi lokasi...</div>`;

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(async (position) => {
                const lat = position.coords.latitude;
                const lng = position.coords.longitude;
                const date = new Date().getDate();
                const month = new Date().getMonth() + 1;
                const year = new Date().getFullYear();

                try {
                    const res = await fetch(`https://api.aladhan.com/v1/timings/${date}-${month}-${year}?latitude=${lat}&longitude=${lng}&method=11`);
                    const data = await res.json();
                    const timings = data.data.timings;

                    area.innerHTML = `
                        <div class="container">
                            <div class="card" style="background:var(--gradient-emerald); color:white; text-align:center; border-left:none; padding:25px; margin-bottom:15px;">
                                <h2 style="margin:0; font-family:'Amiri';">Jadwal Ibadah Hari Ini</h2>
                                <p style="opacity:0.8; font-size:14px;">${data.data.date.readable}</p>
                                <button onclick="let p = document.getElementById('adzan-player'); p.play().then(()=>{p.pause(); p.currentTime=0; alert('‚úÖ Adzan Otomatis Aktif!')})" 
                                        style="margin-top:10px; padding:10px 15px; border-radius:12px; border:none; background:var(--secondary); color:var(--primary-dark); font-weight:bold; cursor:pointer;">
                                    üîî Aktifkan Suara Adzan
                                </button>
                            </div>
                            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                                <div class="card" style="display:block; text-align:center; border-bottom:4px solid var(--secondary); padding:15px;">
                                    <small style="color:var(--secondary); font-weight:bold;">IMSAK</small>
                                    <h1 style="margin:5px 0; font-size:28px;">${timings.Imsak}</h1>
                                </div>
                                <div class="card" style="display:block; text-align:center; border-bottom:4px solid var(--secondary); padding:15px;">
                                    <small style="color:var(--secondary); font-weight:bold;">MAGHRIB</small>
                                    <h1 style="margin:5px 0; font-size:28px;">${timings.Maghrib}</h1>
                                </div>
                            </div>
                            <div class="card" style="display:block; padding:15px; margin-top:15px; border-left: 6px solid var(--primary);">
                                <p style="font-size:12px; font-weight:bold; color:var(--primary); margin-bottom:10px; text-align:center; border-bottom:1px solid #eee; padding-bottom:5px;">JADWAL SHALAT LENGKAP</p>
                                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;"><span>Subuh</span> <b>${timings.Fajr}</b></div>
                                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;"><span>Dzuhur</span> <b>${timings.Dhuhr}</b></div>
                                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;"><span>Ashar</span> <b>${timings.Asr}</b></div>
                                <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;"><span>Maghrib</span> <b>${timings.Maghrib}</b></div>
                                <div style="display:flex; justify-content:space-between; padding:8px 0;"><span>Isya</span> <b>${timings.Isha}</b></div>
                            </div>
                            <div class="hadis-box" style="margin-top:20px; font-style:italic; font-size:12px; text-align:center; opacity:0.8;">
                                "Dzahaba-zh-zhama'u wab-tallatil 'uruuqu wa tsabatal ajru insyaa Allah."
                            </div>
                        </div>
                    `;
                } catch (e) {
                    area.innerHTML = "<div class='card'>Gagal mengambil jadwal.</div>";
                }
            }, () => {
                area.innerHTML = "<div class='card'>Akses lokasi ditolak.</div>";
            });
        }
    }

    function showMurottal() {
        updateActiveNav(4);
        const container = document.getElementById('app-content');
        
        container.innerHTML = `
            <div class="container">
                <div style="position: sticky; top: 70px; z-index: 100; background: var(--bg); padding: 10px 0;">
                    <input type="text" id="cariSurah" onkeyup="filterSurah()" placeholder="üîç Cari Surah Murottal..." 
                    style="width: 100%; padding: 12px 20px; border-radius: 30px; border: 2px solid var(--primary); outline: none; box-shadow: var(--shadow); font-size: 14px; background: var(--card); color: var(--text); box-sizing: border-box;">
                </div>
                <div id="daftarMurottal" style="display: grid; gap: 12px; margin-top: 10px;"></div>
            </div>
        `;

        const listContainer = document.getElementById('daftarMurottal');
        const surahNames = ["Al-Fatihah","Al-Baqarah","Ali 'Imran","An-Nisa'","Al-Ma'idah","Al-An'am","Al-A'raf","Al-Anfal","At-Taubah","Yunus","Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr","An-Nahl","Al-Isra'","Al-Kahf","Maryam","Thaha","Al-Anbiya'","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan","Asy-Syu'ara'","An-Naml","Al-Qashash","Al-'Ankabut","Ar-Rum","Luqman","As-Sajdah","Al-Ahzab","Saba'","Fathir","Ya Sin","Ash-Shaffat","Shad","Az-Zumar","Ghafir","Fushshilat","Asy-Syura","Az-Zukhruf","Ad-Dukhan","Al-Jatsiyah","Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf","Adz-Dzariyat","Ath-Thur","An-Najm","Al-Qamar","Ar-Rahman","Al-Waqi'ah","Al-Hadid","Al-Mujadilah","Al-Hasyr","Al-Mumtahanah","Ash-Shaff","Al-Jumu'ah","Al-Munafiqun","At-Taghabun","At-Thalaq","At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqah","Al-Ma'arij","Nuh","Al-Jinn","Al-Muzzammil","Al-Muddatstsir","Al-Qiyamah","Al-Insan","Al-Mursalat","An-Naba'","An-Nazi'at","'Abasa","At-Takwir","Al-Infithar","Al-Muthaffifin","Al-Insyiqaq","Al-Buruj","Ath-Thariq","Al-A'la","Al-Ghasyiyah","Al-Fajr","Al-Balad","Asy-Syams","Al-Lail","Ad-Duha","Asy-Syarh","At-Tin","Al-'Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-'Adiyat","Al-Qari'ah","At-Takatsur","Al-'Asr","Al-Humazah","Al-Fil","Quraisy","Al-Ma'un","Al-Kautsar","Al-Kafirun","An-Nashr","Al-Lahab","Al-Ikhlas","Al-Falaq","An-Nas"];

        let html = '';
        for (let i = 1; i <= 114; i++) {
            let noSurah = i.toString().padStart(3, '0');
            let namaSurah = surahNames[i-1];
            html += `
              <div class="item-surah card" style="display: flex; align-items: center; justify-content: space-between; padding: 12px 15px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                  <div style="background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold; flex-shrink:0;">
                    ${i}
                  </div>
                  <strong style="font-size: 14px;">${namaSurah}</strong>
                </div>
                <audio controls style="height: 30px; width: 140px;">
                  <source src="https://server8.mp3quran.net/afs/${noSurah}.mp3" type="audio/mpeg">
                </audio>
              </div>
            `;
        }
        listContainer.innerHTML = html;
    }

    function filterSurah() {
        let input = document.getElementById('cariSurah').value.toLowerCase();
        let items = document.getElementsByClassName('item-surah');
        for (let i = 0; i < items.length; i++) {
            let text = items[i].innerText.toLowerCase();
            items[i].style.display = text.includes(input) ? "flex" : "none";
        }
    }

    function toggleTheme() { document.body.classList.toggle('dark-theme'); }
    
    function updateActiveNav(n) {
        document.querySelectorAll('.nav-item').forEach((item, i) => item.classList.toggle('active', i === n));
    }
</script>

<audio id="adzan-player" src="adzan.mp3" preload="auto"></audio>

</body>
</html>
