<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IslamicDigitalApp - Premium Emerald Gold</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #46A29F; 
            --primary-dark: #1B4D3E; 
            --secondary: #D4AF37;     
            --accent-light: #F9E076; 
            --bg: #F4F7F6; 
            --card: #FFFFFF;          
            --text: #1B4D3E; 
            --latin: #bc9512; 
            --radius: 24px;
            --gradient-emerald: linear-gradient(135deg, #46A29F, #1B4D3E);
            --gradient-gold: linear-gradient(135deg, #D4AF37, #F9E076);
            --shadow: 0 8px 20px rgba(0,0,0,0.05);
        }

        .dark-theme { 
            --bg: #0A1613; --card: #152A25; --primary: #58C4C0; 
            --primary-dark: #81E6A4; --secondary: #F9E076; 
            --text: #E0F2EF; --latin: #F9E076; 
        }

        body { 
            margin: 0; font-family: 'Inter', sans-serif; 
            background-color: var(--bg); color: var(--text); 
            transition: 0.3s; padding-bottom: 100px; 
            overflow-x: hidden;
        }

        /* --- SPLASH SCREEN DARK KALIGRAFI --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0A1613; 
            display: flex; justify-content: center; align-items: center;
            z-index: 9999; transition: opacity 0.5s ease, visibility 0.5s;
        }
        .splash-content { text-align: center; color: var(--secondary); }
        .quran-logo-svg { 
            width: 130px; height: 130px; fill: var(--secondary); 
            filter: drop-shadow(0 0 15px rgba(212, 175, 55, 0.4));
            margin-bottom: 20px; animation: pulse 2s infinite ease-in-out;
        }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .loader-bar {
            width: 140px; height: 3px; background: rgba(255,255,255,0.1);
            margin: 15px auto; border-radius: 10px; overflow: hidden;
        }
        .loader-progress {
            width: 0%; height: 100%; background: var(--secondary);
            animation: loadProgress 1.5s forwards ease-in-out;
        }
        @keyframes loadProgress { to { width: 100%; } }
        .splash-hidden { opacity: 0; visibility: hidden; pointer-events: none; }

.card { display: flex; transition: 0.3s; } /* Pastikan sudah ada */
@media screen and (max-width: 600px) {
    .container { padding: 10px; }
}

        /* --- UI COMPONENTS --- */
        header { 
            background: var(--gradient-emerald); color: white; padding: 25px 15px; 
            display: flex; align-items: center; position: sticky; top: 0; z-index: 1000; 
            border-bottom-left-radius: var(--radius); border-bottom-right-radius: var(--radius); 
            box-shadow: 0 4px 15px rgba(0,0,0,0.2); border-bottom: 3px solid var(--secondary); 
        }
        .header-title { flex-grow: 1; text-align: center; margin-right: 35px; }
        .theme-btn { background: rgba(255,255,255,0.2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; }

        #top-info-section { background: var(--card); margin: 15px; padding: 20px; border-radius: var(--radius); text-align: center; box-shadow: var(--shadow); }
        .calendar-box { font-size: 14px; font-weight: bold; color: var(--primary); }
        
        .container { padding: 0 15px; }
        .recent-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 0 15px; margin-bottom: 25px; }
        .recent-item { 
            background: var(--gradient-emerald); color: white; padding: 12px 5px; 
            border-radius: 20px; height: 100px; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; box-shadow: 0 5px 12px rgba(27,77,62,0.2); 
            cursor: pointer; border: 1px solid var(--secondary); 
        }
        .recent-item b { font-size: 10px; text-align: center; margin-top: 5px; width: 90%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        .card { background: var(--card); border-radius: var(--radius); padding: 20px; margin-bottom: 15px; display: flex; align-items: center; justify-content: space-between; border-left: 6px solid var(--secondary); box-shadow: 0 4px 10px rgba(0,0,0,0.03); cursor: pointer; }
        .ayat-box { background: var(--card); padding: 20px; margin-bottom: 15px; border-radius: var(--radius); border-bottom: 4px solid var(--secondary); }
        .teks-arab { font-family: 'Amiri', serif; font-size: 32px; direction: rtl; line-height: 2.3; text-align: right; color: var(--primary-dark); }
        .teks-latin { color: var(--latin); font-style: italic; font-size: 14px; margin: 15px 0 10px 0; }
        .teks-indo { font-size: 13px; opacity: 0.8; line-height: 1.6; border-top: 1px dashed #eee; padding-top: 10px; }

        /* --- MODERN PAGES STYLES --- */
        .page-header { background: var(--gradient-emerald); padding: 40px 20px; border-radius: var(--radius); color: white; text-align: center; margin-bottom: 25px; border: 2px solid var(--secondary); position: relative; overflow: hidden; }
        .page-header::after { content: '€û'; position: absolute; bottom: -10px; right: 20px; font-size: 80px; opacity: 0.1; }
        .quote-box { font-family: 'Amiri', serif; font-size: 20px; color: var(--secondary); margin-bottom: 10px; }
        .modern-list { background: var(--card); border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.05); }
        .modern-list-item { padding: 20px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; cursor: pointer; }
        
        /* --- NAV --- */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 85px; background: var(--card); display: flex; justify-content: space-around; align-items: center; border-top-left-radius: var(--radius); border-top-right-radius: var(--radius); border-top: 2px solid var(--secondary); box-shadow: 0 -5px 20px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { text-align: center; color: #888; flex: 1; cursor: pointer; }
        .nav-item.active { color: var(--primary); font-weight: bold; }
        .nav-item span { font-size: 24px; display: block; }

        /* --- MISC --- */
        .play-btn { background: var(--gradient-gold); color: #1B4D3E; border: none; padding: 8px 16px; border-radius: 20px; font-weight: bold; cursor: pointer; }
        .playing { border: 2px solid var(--secondary); background: rgba(212,175,55,0.05); }
        .qris-img { width: 220px; height: 220px; border: 5px solid white; border-radius: 15px; box-shadow: var(--shadow); margin-top: 15px; }
        .contact-btn { display: flex; align-items: center; justify-content: center; gap: 10px; background: var(--card); padding: 15px; border-radius: 15px; margin-bottom: 10px; text-decoration: none; color: var(--text); border: 1px solid #eee; font-weight: bold; transition: 0.3s; }
        .contact-btn:active { transform: scale(0.98); background: #f9f9f9; }
    </style>
</head>
<body>

<div id="splash-screen">
    <div class="splash-content">
        <svg class="quran-logo-svg" viewBox="0 0 24 24">
            <path d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.57,5 2.89,5.83 1.74,7.14C1.27,7.67 1,8.34 1,9.05V20.5C1,21.42 1.9,22.08 2.77,21.82C4.04,21.44 5.31,21.25 6.5,21.25C8.31,21.25 10.38,21.75 12,22.5C13.62,21.75 15.69,21.25 17.5,21.25C18.69,21.25 19.96,21.44 21.23,21.82C22.1,22.08 23,21.42 23,20.5V9.05C23,8.34 22.73,7.67 22.26,7.14C21.11,5.83 19.43,5 17.5,5C15.63,5 13.88,5.75 12.5,7V7C11.12,5.75 9.37,5 7.5,5H6.5M7.5,7C8.94,7 10.27,7.66 11.21,8.7L12.5,10.11L13.79,8.7C14.73,7.66 16.06,7 17.5,7C18.91,7 20.15,7.59 21,8.5V19C19.91,18.66 18.77,18.5 17.5,18.5C15.5,18.5 13.5,19 12,20V11C12,9.34 10.66,8 9,8H7.5C6.23,8 5.09,8.16 4,8.5V19C5.23,18.66 6.37,18.5 7.5,18.5C9.5,18.5 11.5,19 13,20V20" />
        </svg>
        <h2 style="letter-spacing: 4px; margin: 0; font-family: 'Amiri', serif;">AL-QUR'AN</h2>
        <p style="font-size: 10px; color: white; opacity: 0.6; margin-top: 5px;">Islamic Digital Application</p>
        <div class="loader-bar"><div class="loader-progress"></div></div>
    </div>
</div>

<header>
    <button class="theme-btn" onclick="toggleTheme()">üåì</button>
    <div class="header-title"><h3 style="margin:0;">üìñ</h3></div>
</header>

<div id="top-info-section">
    <div class="calendar-box" id="calendar-display">Memuat Kalender...</div>
    <div id="adz">Quotes hari ini</div>
    <div id="renungan-box">"Hati yang bersyukur adalah magnet kebahagiaan."</div>
</div>

<div id="app-content"></div>

<nav class="bottom-nav">
    <div class="nav-item active" id="nav-0" onclick="showHome()"><span>üè†</span></div>
    <div class="nav-item" id="nav-1" onclick="showCariAyat()"><span>üîç</span></div>
    <div class="nav-item" id="nav-2" onclick="loadJadwalPuasa()"><span>üïå</span></div>
    <div class='nav-item' id='nav-3' onclick='showMurottal()'><span>üéß</span></div>
    <div class="nav-item" id="nav-4" onclick="showMenuLainnya()"><span>‚ò∞</span></div>
</nav>

<script>
    let currentAudio = new Audio();
    let selectedQori = '01';

    window.addEventListener('load', () => {
        updateMasehi();
        showHome();
        setTimeout(() => {
            document.getElementById('splash-screen').classList.add('splash-hidden');
        }, 1500); 
    });

    function updateMasehi() {
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('calendar-display').innerText = new Date().toLocaleDateString('id-ID', options);
    }

    // --- HOME & SURAH LOGIC ---
    function saveHistory(num, name) {
        let history = JSON.parse(localStorage.getItem('readingHistory') || "[]");
        history = history.filter(item => item.num !== num);
        history.unshift({ num, name });
        if (history.length > 3) history.pop();
        localStorage.setItem('readingHistory', JSON.stringify(history));
    }

    function getHistoryHTML() {
        let history = JSON.parse(localStorage.getItem('readingHistory') || "[]");
        let html = '';
        for (let i = 0; i < 3; i++) {
            if (history[i]) html += `<div class="recent-item" onclick="showDetail(${history[i].num}, '${history[i].name}')"><span>üìñ</span><b>${history[i].name}</b></div>`;
            else html += `<div class="recent-item" style="background:transparent; border:1px dashed var(--primary); color:#999;"><span>‚ûñ</span><b>Kosong</b></div>`;
        }
        return html;
    }

    async function showHome() {
        updateActiveNav(0);
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <p style="font-size:10px; font-weight:bold; opacity:0.6; margin:15px 0 10px;">TERAKHIR DIBACA</p>
                <div class="recent-grid">${getHistoryHTML()}</div>
                <p style="font-size:10px; font-weight:bold; opacity:0.6; margin-bottom:10px;">DAFTAR SURAH</p>
                <div id="list-container">Memuat...</div>
            </div>`;
        try {
            const res = await fetch('https://equran.id/api/v2/surat');
            const data = await res.json();
            document.getElementById('list-container').innerHTML = data.data.map(s => `
                <div class="card" onclick="showDetail(${s.nomor}, '${s.namaLatin}')">
                    <div><b>${s.nomor}. ${s.namaLatin}</b><br><small>${s.arti}</small></div>
                    <div style="font-family:'Amiri'; color:var(--primary); font-size:22px;">${s.nama}</div>
                </div>`).join('');
        } catch(e) { document.getElementById('list-container').innerHTML = "Gagal memuat."; }
    }

    async function showDetail(id, name) {
        saveHistory(id, name);
        const content = document.getElementById('app-content');
        content.innerHTML = '<p style="text-align:center; padding:50px;">Bismillah...</p>';
        const res = await fetch(`https://equran.id/api/v2/surat/${id}`);
        const json = await res.json();
        const s = json.data;

        let html = `<div class="container">
            <button onclick="showHome()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
            <div style="background:var(--card); padding:15px; border-radius:15px; margin-bottom:15px; border:1px solid var(--secondary);">
                <label style="font-size:11px; font-weight:bold;">Pilih Qori:</label>
                <select style="width:100%; padding:10px; border-radius:10px; margin-top:5px; border:1px solid #ddd;" onchange="selectedQori = this.value">
                    <option value="01" ${selectedQori=='01'?'selected':''}>Misyari Rasyid Al-Afasy</option>
                    <option value="02" ${selectedQori=='02'?'selected':''}>Abdullah Al-Juhany</option>
                    <option value="03" ${selectedQori=='03'?'selected':''}>Abdurrahman As-Sudais</option>
                    <option value="04" ${selectedQori=='04'?'selected':''}>Muammar ZA</option>
                </select>
            </div>
            <h2 style="text-align:center; color:var(--primary-dark); font-family:'Amiri';">${s.namaLatin}</h2>`;

        s.ayat.forEach(a => {
            html += `
                <div class="ayat-box" id="ayat-${a.nomorAyat}">
                    <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                        <span style="background:var(--secondary); color:#1B4D3E; padding:3px 12px; border-radius:15px; font-size:11px; font-weight:bold;">Ayat ${a.nomorAyat}</span>
                        <button class="play-btn" data-audio='${JSON.stringify(a.audio)}' data-id="${a.nomorAyat}" data-total="${s.jumlahAyat}">‚ñ∂ Putar</button>
                    </div>
                    <div class="teks-arab">${a.teksArab}</div>
                    <div class="teks-latin">${a.teksLatin}</div>
                    <div class="teks-indo">${a.teksIndonesia}</div>
                </div>`;
        });
        content.innerHTML = html + "</div>";
        window.scrollTo(0,0);
        document.querySelectorAll('.play-btn').forEach(btn => {
            btn.onclick = () => {
                const audios = JSON.parse(btn.getAttribute('data-audio'));
                playMurottal(audios[selectedQori], parseInt(btn.getAttribute('data-id')), parseInt(btn.getAttribute('data-total')));
            };
        });
    }

    function playMurottal(url, id, total) {
        currentAudio.pause(); currentAudio = new Audio(url);
        document.querySelectorAll('.ayat-box').forEach(el => el.classList.remove('playing'));
        const target = document.getElementById(`ayat-${id}`);
        if(target) { target.classList.add('playing'); target.scrollIntoView({ behavior: 'smooth', block: 'center' }); }
        currentAudio.play();
        currentAudio.onended = () => {
            if (id < total) {
                const next = document.querySelector(`.play-btn[data-id="${id + 1}"]`);
                if(next) next.click();
            }
        };
    }

// --- Letakkan ini di dalam tag <script> ---

function showCariAyat() {
    updateActiveNav(1);
    document.getElementById('app-content').innerHTML = `
        <div class="container">
            <div class="page-header">
                <h2 style="margin:0; font-family: 'Amiri', serif;">Pencarian Pintar</h2>
                <p style="font-size: 12px; opacity: 0.9; margin-top: 5px;">Cari surah berdasarkan nama atau arti</p>
            </div>
            
            <div style="position: relative; margin-bottom: 25px;">
                <input type="text" id="input-cari" onkeyup="liveSearch(this.value)" placeholder="Ketik nama surah atau arti..." 
                       style="width: 100%; padding: 18px 20px; border-radius: 15px; border: 2px solid #eee; font-family: 'Inter'; outline: none; box-sizing: border-box; box-shadow: var(--shadow); font-size: 14px;">
            </div>

            <div id="hasil-cari-container">
                <div style="text-align: center; padding: 40px 20px; opacity: 0.5;">
                    <span style="font-size: 50px;">üìñ</span>
                    <p>Masukkan kata kunci untuk mencari surah...</p>
                </div>
            </div>
        </div>
    `;
}

async function liveSearch(query) {
    const container = document.getElementById('hasil-cari-container');
    if (query.length < 2) return;

    try {
        const res = await fetch('https://equran.id/api/v2/surat');
        const json = await res.json();
        const results = json.data.filter(s => 
            s.namaLatin.toLowerCase().includes(query.toLowerCase()) || 
            s.arti.toLowerCase().includes(query.toLowerCase())
        );

        if (results.length > 0) {
            container.innerHTML = results.map(s => `
                <div class="card" onclick="showDetail(${s.nomor}, '${s.namaLatin}')">
                    <div><b>${s.nomor}. ${s.namaLatin}</b><br><small>${s.arti}</small></div>
                    <div style="font-family: 'Amiri'; color: var(--primary); font-size: 20px;">${s.nama}</div>
                </div>
            `).join('');
        } else {
            container.innerHTML = `<p style="text-align:center; opacity:0.5;">Surah tidak ditemukan.</p>`;
        }
    } catch (e) { console.error("Gagal mencari"); }
}


    // --- MENU LAINNYA ---
    function showMenuLainnya() {
        updateActiveNav(3);
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <div class="modern-list">
                    <div class="modern-list-item" onclick="showTentangKami()">
                        <div><b>‚ÑπÔ∏è Tentang Kami</b><br><small style="opacity:0.6;">Misi & Visi Aplikasi</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="showKontakSaran()">
                        <div><b>üí¨ Kontak & Saran</b><br><small style="opacity:0.6;">Kirim kritik & saran Anda</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="showDonasi()">
                        <div><b>üéÅ Donasi Pengembangan</b><br><small style="opacity:0.6;">Dukung keberlanjutan aplikasi</small></div>
                        <span>‚Üí</span>
                    </div>
                    <div class="modern-list-item" onclick="window.open('https://islamicdigitalapp.blogspot.com')">
                        <div><b>üåê Website & Blog</b><br><small style="opacity:0.6;">Informasi terbaru kami</small></div>
                        <span>‚Üí</span>
                    </div>
                </div>
                <p style="text-align:center; font-size:10px; margin-top:30px; opacity:0.5;">Version 2.0 Premium ¬© 2026 IslamicDigitalApp all right reserved</p>
            </div>`;
    }

    function showTentangKami() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="page-header">
                    <div class="quote-box">"Khairunnas Anfa'uhum Linnas"</div>
                    <p style="font-size:12px; font-style:italic; opacity:0.9;">Sebaik-baik manusia adalah yang paling bermanfaat bagi orang lain.</p>
                </div>
                <div class="card" style="display:block; border-left:none; border-bottom:5px solid var(--secondary);">
                    <h3 style="color:var(--primary-dark); margin-top:0;">Visi Kami</h3>
                    <p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;">
                        IslamicDigitalApp lahir dari niat tulus untuk mendekatkan Al-Qur'an ke genggaman setiap hamba Allah di era modern. Kami percaya bahwa teknologi adalah jembatan menuju keberkahan jika digunakan untuk menyebarkan kalam Ilahi.
                    </p>
                    <h3 style="color:var(--primary-dark);">Misi Premium</h3>
                    <p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;">
                        Menghadirkan pengalaman membaca Al-Qur'an yang tenang, tanpa gangguan iklan, dengan estetika Emerald & Gold yang memanjakan mata, serta kemudahan akses murottal dari Qori ternama dunia, data Sumber Al-Quran dari equran. id Dijamin ke aslian nya.
                    </p>
                    <h3 style="color:var(--primary-dark);">Disclaimer on</h3>
<p style="font-size:13px; line-height:1.7; text-align:justify; opacity:0.8;"> Semua data Al-Quran digital ini menggunakan data digital Al-Qur'an yang bersumberkan daripada API EQuran.id (oleh equran.id). Semua teks Arab, transliterasi (Latin), terjemahan Bahasa Indonesia, dan fail audio murottal adalah berdasarkan pangkalan data tersebut yang terus dikemas kini secara berkala.
                </div>
            </div>`;
    }

    function showKontakSaran() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="page-header">
                    <div class="quote-box">Kritik & Saran</div>
                    <p style="font-size:12px; opacity:0.9;">Suara Anda sangat berarti bagi kesempurnaan aplikasi ini.</p>
                </div>
                <div class="card" style="display:block; border-left:none; padding:25px; border-bottom:5px solid var(--primary);">
                    <p style="font-size:13px; margin-bottom:20px; text-align:center; opacity:0.8;">Silahkan hubungi kami melalui saluran berikut untuk memberikan kritik, saran, atau melaporkan kesalahan:</p>
                    
                    <a href="https://wa.me/6283803888990?text=Assalamualaikum,%20saya%20ingin%20memberikan%20saran%20untuk%20IslamicDigitalApp" class="contact-btn">
                        <span style="font-size:20px;">üì±</span> WhatsApp: 083803888990
                    </a>
                    
                    <a href="mailto:mholis1991@gmail.com?subject=Saran%20IslamicDigitalApp" class="contact-btn">
                        <span style="font-size:20px;">üìß</span> Email: mholis1991@gmail.com
                    </a>

                    <div style="margin-top:20px; text-align:center; border-top:1px solid #eee; padding-top:15px;">
                        <small style="font-style:italic; color:var(--primary);">Jazakumullah Khairan Katsiran</small>
                    </div>
                </div>
            </div>`;
    }

    function showDonasi() {
        document.getElementById('app-content').innerHTML = `
            <div class="container">
                <button onclick="showMenuLainnya()" style="border:none; background:none; color:var(--primary); padding:15px 0; font-weight:bold; cursor:pointer;">‚Üê Kembali</button>
                <div class="card" style="display:block; text-align:center; padding:30px; border-left:none; border-top:5px solid var(--secondary);">
                    <h3 style="color:var(--primary-dark); margin-top:0;">Infaq Jariyah</h3>
                    <p style="font-size:13px; opacity:0.7;">Sedekah Anda membantu kami menjaga aplikasi tetap bebas iklan selamanya.</p>
                    <div style="margin:20px 0; text-align: center;">
    <p style="font-size:11px; font-weight:bold; color:var(--latin); margin-bottom: 10px;">SCAN QRIS DISINI</p>
    
    <img src="https://lh3.googleusercontent.com/u/0/d/1oBVpUR4s_mOAp4EcUbi25hb49MIA3yRf=w1000-h1000" 
         class="qris-img" 
         alt="QRIS Donasi"
         style="width: 250px; height: 250px; object-fit: contain; border: 5px solid white; border-radius: 15px;">
</div>


                    <div style="background:rgba(70,162,159,0.05); padding:15px; border-radius:15px; border:1px solid #eee; text-align:left;">
                        <small style="color:var(--primary); font-weight:bold;">BCA (Transfer Manual)</small>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <b style="font-size:18px;">6095055005</b>
                            <button onclick="navigator.clipboard.writeText('6095055005'); alert('Disalin!')" style="background:var(--primary); color:white; border:none; padding:5px 10px; border-radius:8px; font-size:11px;">SALIN</button>
                        </div>
                        <small>a.n Muhamad Holis</small>
                    </div>
                </div>
            </div>`;
    }

    function loadJadwalSholat() {
        updateActiveNav(2);
        document.getElementById('app-content').innerHTML = '<p style="text-align:center; padding:50px;">Mencari Lokasi...</p>';
        navigator.geolocation.getCurrentPosition(async (p) => {
            try {
                const res = await fetch(`https://api.aladhan.com/v1/timingsPosition?latitude=${p.coords.latitude}&longitude=${p.coords.longitude}&method=4`);
                const d = await res.json(); 
                const t = d.data.timings;
                document.getElementById('app-content').innerHTML = `
                    <div class="container">
                        <div style="background:var(--gradient-emerald); color:white; padding:30px; border-radius:var(--radius); text-align:center; border:2px solid var(--secondary);">
                            <h3>Waktu Sholat</h3>
                            <p>Subuh: ${t.Fajr} | Dzuhur: ${t.Dhuhr} | Ashar: ${t.Asr} | Maghrib: ${t.Maghrib} | Isya: ${t.Isha}</p>
                        </div>
                    </div>`;
            } catch(e) { document.getElementById('app-content').innerHTML = "Gagal memuat."; }
        });
    }

    function toggleTheme() { document.body.classList.toggle('dark-theme'); }
    function updateActiveNav(n) {
        document.querySelectorAll('.nav-item').forEach((item, i) => item.classList.toggle('active', i === n));
    }
    
async function loadJadwalPuasa() {
    updateActiveNav(2); 
    const area = document.getElementById('app-content');
    area.innerHTML = `<div style="text-align:center; padding:50px;">Mendeteksi lokasi...</div>`;

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(async (position) => {
            const lat = position.coords.latitude;
            const lng = position.coords.longitude;
            const date = new Date().getDate();
            const month = new Date().getMonth() + 1;
            const year = new Date().getFullYear();

            try {
                const res = await fetch(`https://api.aladhan.com/v1/timings/${date}-${month}-${year}?latitude=${lat}&longitude=${lng}&method=11`);
                const data = await res.json();
                
                prayerTimings = data.data.timings; 
                const timings = data.data.timings;

                area.innerHTML = `
                    <div class="container">
                        <div class="card" style="background:var(--gradient-emerald); color:white; text-align:center; border-left:none; padding:25px; margin-bottom:15px;">
                            <h2 style="margin:0; font-family:'Amiri';">Jadwal Ibadah Hari Ini</h2>
                            <p style="opacity:0.8; font-size:14px;">${data.data.date.readable}</p>
                            <button onclick="let p = document.getElementById('adzan-player'); p.play().then(()=>{p.pause(); p.currentTime=0; alert('‚úÖ Adzan Otomatis Aktif!')})" 
                                    style="margin-top:10px; padding:10px 15px; border-radius:12px; border:none; background:var(--secondary); color:var(--primary-dark); font-weight:bold; cursor:pointer;">
                                üîî Aktifkan Suara Adzan
                            </button>
                        </div>

                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                            <div class="card" style="display:block; text-align:center; border-bottom:4px solid var(--secondary); padding:15px;">
                                <small style="color:var(--secondary); font-weight:bold;">IMSAK</small>
                                <h1 style="margin:5px 0; font-size:28px;">${timings.Imsak}</h1>
                            </div>
                            <div class="card" style="display:block; text-align:center; border-bottom:4px solid var(--secondary); padding:15px;">
                                <small style="color:var(--secondary); font-weight:bold;">MAGHRIB</small>
                                <h1 style="margin:5px 0; font-size:28px;">${timings.Maghrib}</h1>
                            </div>
                        </div>

                        <div class="card" style="display:block; padding:15px; margin-top:15px; border-left: 6px solid var(--primary);">
                            <p style="font-size:12px; font-weight:bold; color:var(--primary); margin-bottom:10px; text-align:center; border-bottom:1px solid #eee; padding-bottom:5px;">JADWAL SHALAT LENGKAP</p>
                            <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;">
                                <span>Subuh</span> <b>${timings.Fajr}</b>
                            </div>
                            <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;">
                                <span>Dzuhur</span> <b>${timings.Dhuhr}</b>
                            </div>
                            <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;">
                                <span>Ashar</span> <b>${timings.Asr}</b>
                            </div>
                            <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid #f9f9f9;">
                                <span>Maghrib</span> <b>${timings.Maghrib}</b>
                            </div>
                            <div style="display:flex; justify-content:space-between; padding:8px 0;">
                                <span>Isya</span> <b>${timings.Isha}</b>
                            </div>
                        </div>

                        <div class="hadis-box" style="margin-top:20px; font-style:italic; font-size:12px; text-align:center; opacity:0.8;">
                            "Dzahaba-zh-zhama‚Äôu wab-tallatil ‚Äòuruuqu wa tsabatal ajru insyaa Allah."
                        </div>
                    </div>
                `;
            } catch (e) {
                area.innerHTML = "<div class='card'>Gagal mengambil jadwal.</div>";
            }
        }, () => {
            area.innerHTML = "<div class='card'>Akses lokasi ditolak.</div>";
        });
    }
}
function showMurottal() {
    updateActiveNav(3); // Sesuaikan index menu "Lainnya" atau menu baru
    const container = document.getElementById('app-content');
    
    // Header dan Search Bar
    container.innerHTML = `
        <div class="container">
            <div style="position: sticky; top: 70px; z-index: 100; background: var(--bg); padding: 10px 0;">
                <input type="text" id="cariSurah" onkeyup="filterSurah()" placeholder="üîç Cari Surah Murottal..." 
                style="width: 100%; padding: 12px 20px; border-radius: 30px; border: 2px solid var(--primary); outline: none; box-shadow: var(--shadow); font-size: 14px; background: var(--card); color: var(--text);">
            </div>
            <div id="daftarMurottal" style="display: grid; gap: 12px; margin-top: 10px;"></div>
        </div>
    `;

    const listContainer = document.getElementById('daftarMurottal');
    const surahNames = ["Al-Fatihah","Al-Baqarah","Ali 'Imran","An-Nisa'","Al-Ma'idah","Al-An'am","Al-A'raf","Al-Anfal","At-Taubah","Yunus","Hud","Yusuf","Ar-Ra'd","Ibrahim","Al-Hijr","An-Nahl","Al-Isra'","Al-Kahf","Maryam","Thaha","Al-Anbiya'","Al-Hajj","Al-Mu'minun","An-Nur","Al-Furqan","Asy-Syu'ara'","An-Naml","Al-Qashash","Al-'Ankabut","Ar-Rum","Luqman","As-Sajdah","Al-Ahzab","Saba'","Fathir","Ya Sin","Ash-Shaffat","Shad","Az-Zumar","Ghafir","Fushshilat","Asy-Syura","Az-Zukhruf","Ad-Dukhan","Al-Jatsiyah","Al-Ahqaf","Muhammad","Al-Fath","Al-Hujurat","Qaf","Adz-Dzariyat","Ath-Thur","An-Najm","Al-Qamar","Ar-Rahman","Al-Waqi'ah","Al-Hadid","Al-Mujadilah","Al-Hasyr","Al-Mumtahanah","Ash-Shaff","Al-Jumu'ah","Al-Munafiqun","At-Taghabun","At-Thalaq","At-Tahrim","Al-Mulk","Al-Qalam","Al-Haqqah","Al-Ma'arij","Nuh","Al-Jinn","Al-Muzzammil","Al-Muddatstsir","Al-Qiyamah","Al-Insan","Al-Mursalat","An-Naba'","An-Nazi'at","'Abasa","At-Takwir","Al-Infithar","Al-Muthaffifin","Al-Insyiqaq","Al-Buruj","Ath-Thariq","Al-A'la","Al-Ghasyiyah","Al-Fajr","Al-Balad","Asy-Syams","Al-Lail","Ad-Duha","Asy-Syarh","At-Tin","Al-'Alaq","Al-Qadr","Al-Bayyinah","Az-Zalzalah","Al-'Adiyat","Al-Qari'ah","At-Takatsur","Al-'Asr","Al-Humazah","Al-Fil","Quraisy","Al-Ma'un","Al-Kautsar","Al-Kafirun","An-Nashr","Al-Lahab","Al-Ikhlas","Al-Falaq","An-Nas"];

    let html = '';
    for (let i = 1; i <= 114; i++) {
        let noSurah = i.toString().padStart(3, '0');
        let namaSurah = surahNames[i-1];

        html += `
          <div class="item-surah card" style="display: flex; align-items: center; justify-content: space-between; padding: 12px 15px;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <div style="background: var(--primary); color: white; width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: bold;">
                ${i}
              </div>
              <strong style="font-size: 14px;">${namaSurah}</strong>
            </div>
            <audio controls style="height: 30px; width: 140px;">
              <source src="https://server8.mp3quran.net/afs/${noSurah}.mp3" type="audio/mpeg">
            </audio>
          </div>
        `;
    }
    listContainer.innerHTML = html;
}

function filterSurah() {
    let input = document.getElementById('cariSurah').value.toLowerCase();
    let items = document.getElementsByClassName('item-surah');
    for (let i = 0; i < items.length; i++) {
        let text = items[i].innerText.toLowerCase();
        items[i].style.display = text.includes(input) ? "flex" : "none";
    }
}

</script>

    <audio id="adzan-player" src="adzan.mp3" preload="auto"></audio>


</body>
</html>
